<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‡«ğŸ‡· æ³•å¼é»é¤ç‰¹è¨“ç­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Nunito:wght@600;800&family=Pacifico&display=swap');
        
        body {
            font-family: 'Nunito', 'Noto Sans TC', sans-serif;
            background-color: #fff1f2; /* Light pinkish background for food theme */
            background-image: radial-gradient(#ffe4e6 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .french-text {
            font-family: 'Nunito', sans-serif;
        }
        
        .menu-font {
            font-family: 'Pacifico', cursive;
        }

        .flag-border-top {
            border-top: 6px solid #0055A4;
        }
        .flag-border-bottom {
            border-bottom: 6px solid #EF4135;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-xl shadow-2xl w-full max-w-5xl overflow-hidden border-x-4 border-white flag-border-top flag-border-bottom relative">
        
        <!-- Decorative Background Icon -->
        <div class="absolute top-4 right-4 text-9xl text-gray-50 opacity-5 pointer-events-none">
            <i class="fas fa-utensils"></i>
        </div>

        <div class="p-6 md:p-10">
            <div class="text-center mb-10">
                <span class="inline-block py-1 px-3 rounded-full bg-red-100 text-red-600 text-sm font-bold tracking-wider mb-2">BISTRO FRANÃ‡AIS</span>
                <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2 menu-font">Bon AppÃ©tit !</h1>
                <p class="text-gray-500">é¸æ“‡ä½ çš„èº«ä»½ã€èªæ°£èˆ‡ç¾é£Ÿï¼Œç·´ç¿’æœ€é“åœ°çš„é»é¤æ³•ã€‚</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-12 gap-6 mb-8 items-start">
                
                <!-- 1. Subject (3 cols) -->
                <div class="md:col-span-3 bg-blue-50 p-5 rounded-2xl border-2 border-blue-100 hover:border-blue-300 transition-all shadow-sm group">
                    <label class="block text-xs font-bold text-blue-800 mb-2 uppercase tracking-widest">1. èª°åœ¨é»é¤ (Sujet)</label>
                    <div class="relative">
                        <select id="subjectSelect" onchange="updateSentence()" class="w-full p-3 bg-white rounded-xl border border-blue-200 text-lg french-text focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none cursor-pointer">
                            <option value="Je">Je (æˆ‘)</option>
                            <option value="Tu">Tu (ä½ )</option>
                            <option value="Il">Il (ä»–)</option>
                            <option value="Elle">Elle (å¥¹)</option>
                            <option value="On">On (æˆ‘å€‘)</option>
                            <option value="Nous">Nous (æˆ‘å€‘)</option>
                            <option value="Vous">Vous (æ‚¨/ä½ å€‘)</option>
                            <option value="Ils">Ils (ä»–å€‘)</option>
                            <option value="Elles">Elles (å¥¹å€‘)</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-blue-500">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                </div>

                <!-- 2. Phrase Structure (4 cols) -->
                <div class="md:col-span-4 bg-purple-50 p-5 rounded-2xl border-2 border-purple-100 hover:border-purple-300 transition-all shadow-sm">
                    <label class="block text-xs font-bold text-purple-800 mb-2 uppercase tracking-widest">2. é»é¤èªæ°£ (Phrase)</label>
                    <div class="relative">
                        <select id="structureSelect" onchange="handleStructureChange()" class="w-full p-3 bg-white rounded-xl border border-purple-200 text-lg french-text focus:outline-none focus:ring-2 focus:ring-purple-500 appearance-none cursor-pointer">
                            <option value="voudrais">Je voudrais... (æœ€æœ‰ç¦®è²Œ â­â­â­â­â­)</option>
                            <option value="vais_prendre">Je vais prendre... (æ¨™æº–/å°‡è¦æ‹¿ â­â­â­)</option>
                            <option value="prends">Je prends... (ç›´æ¥/æˆ‘æ‹¿ â­â­â­)</option>
                            <option value="ce_sera">Ce sera... (æœ€é“åœ°/é€™å°‡æœƒæ˜¯ â­â­â­â­)</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-purple-500">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                    <p id="structureHint" class="text-xs text-purple-600 mt-2 font-medium">ğŸ’¡ ä½¿ç”¨æ¢ä»¶å¼ï¼Œéå¸¸æœ‰ç¦®è²Œã€‚</p>
                </div>

                <!-- 3. Food (5 cols) -->
                <div class="md:col-span-5 bg-orange-50 p-5 rounded-2xl border-2 border-orange-100 hover:border-orange-300 transition-all shadow-sm relative">
                    <label class="block text-xs font-bold text-orange-800 mb-2 uppercase tracking-widest">3. ç¾é£Ÿé¸å–® (Menu)</label>
                    <div class="relative">
                        <select id="foodSelect" onchange="updateSentence()" class="w-full p-3 bg-white rounded-xl border border-orange-200 text-lg french-text focus:outline-none focus:ring-2 focus:ring-orange-500 appearance-none cursor-pointer pr-10">
                            <!-- Options populated by JS -->
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-orange-500">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                    <button onclick="randomizeFood()" class="mt-3 text-xs bg-white text-orange-600 px-3 py-1.5 rounded-lg border border-orange-200 hover:bg-orange-100 transition shadow-sm w-full font-bold">
                        <i class="fas fa-dice mr-1"></i> å¹«æˆ‘éš¨æ©Ÿé¸ä¸€é“èœ
                    </button>
                </div>
            </div>

            <!-- Result Display -->
            <div class="bg-gray-800 text-white rounded-3xl p-8 md:p-12 text-center shadow-xl relative overflow-hidden group">
                <!-- French flag accent -->
                <div class="absolute top-0 left-0 h-full w-1.5 bg-blue-600"></div>
                <div class="absolute top-0 left-1.5 h-full w-1.5 bg-white"></div>
                <div class="absolute top-0 left-3 h-full w-1.5 bg-red-600"></div>

                <p class="text-xs text-gray-400 mb-4 font-bold tracking-[0.2em] uppercase">Votre Commande (æ‚¨çš„è¨‚å–®)</p>
                
                <div id="sentenceDisplay" class="text-3xl md:text-5xl font-bold mb-4 french-text break-words leading-tight min-h-[4rem] text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-300">
                    Je voudrais la baguette, s'il vous plaÃ®t.
                </div>
                
                <p id="translationDisplay" class="text-lg text-gray-400 font-light min-h-[2rem]">
                    æˆ‘æƒ³è¦æ³•åœ‹éºµåŒ…ï¼Œéº»ç…©äº†ã€‚
                </p>

                <!-- Interactive Buttons -->
                <div class="flex justify-center gap-4 mt-8">
                    <button onclick="speakSentence()" class="bg-blue-600 hover:bg-blue-500 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg transform transition hover:scale-110 active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300 group-hover:animate-pulse">
                        <i class="fas fa-volume-up text-2xl"></i>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-2">è½ç™¼éŸ³</p>
            </div>
            
            <!-- Conjugation Cheat Sheet -->
            <div id="conjugationTable" class="mt-8 transition-opacity duration-500">
                <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-3 text-center">ç•¶å‰å‹•è©è®ŠåŒ–è¡¨</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-center text-gray-600 bg-white rounded-lg border border-gray-200">
                        <thead class="bg-gray-50 text-gray-800 font-bold uppercase text-xs">
                            <tr>
                                <th class="px-2 py-2">Je</th>
                                <th class="px-2 py-2">Tu</th>
                                <th class="px-2 py-2">Il/Elle/On</th>
                                <th class="px-2 py-2">Nous</th>
                                <th class="px-2 py-2">Vous</th>
                                <th class="px-2 py-2">Ils/Elles</th>
                            </tr>
                        </thead>
                        <tbody id="conjugationRow">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Food Data
        const foodList = [
            { fr: "la baguette", zh: "æ³•åœ‹éºµåŒ… (é•·æ£)", emoji: "ğŸ¥–" },
            { fr: "le croissant", zh: "å¯é Œ", emoji: "ğŸ¥" },
            { fr: "le riz", zh: "ç±³é£¯", emoji: "ğŸš" },
            { fr: "le pain", zh: "éºµåŒ… (æ³›æŒ‡)", emoji: "ğŸ" },
            { fr: "les pÃ¢tes", zh: "ç¾©å¤§åˆ©éºµ/éºµæ¢", emoji: "ğŸ" },
            { fr: "le sandwich", zh: "ä¸‰æ˜æ²»", emoji: "ğŸ¥ª" },
            { fr: "la pizza", zh: "æŠ«è–©", emoji: "ğŸ•" },
            { fr: "le beurre", zh: "å¥¶æ²¹", emoji: "ğŸ§ˆ" },
            { fr: "le poulet", zh: "é›è‚‰", emoji: "ğŸ—" },
            { fr: "le bÅ“uf", zh: "ç‰›è‚‰", emoji: "ğŸ¥©" },
            { fr: "le porc", zh: "è±¬è‚‰", emoji: "ğŸ¥“" },
            { fr: "le canard", zh: "é´¨è‚‰", emoji: "ğŸ¦†" },
            { fr: "le poisson", zh: "é­š", emoji: "ğŸŸ" },
            { fr: "le saumon", zh: "é®­é­š", emoji: "ğŸŸ" },
            { fr: "les crevettes", zh: "è¦å­", emoji: "ğŸ¤" },
            { fr: "le jambon", zh: "ç«è…¿", emoji: "ğŸ–" },
            { fr: "l'Å“uf", zh: "è›‹", emoji: "ğŸ¥š" },
            { fr: "le steak", zh: "ç‰›æ’", emoji: "ğŸ¥©" },
            { fr: "la pomme", zh: "è˜‹æœ", emoji: "ğŸ" },
            { fr: "la banane", zh: "é¦™è•‰", emoji: "ğŸŒ" },
            { fr: "l'orange", zh: "æŸ³æ©™", emoji: "ğŸŠ" },
            { fr: "le citron", zh: "æª¸æª¬", emoji: "ğŸ‹" },
            { fr: "la fraise", zh: "è‰è“", emoji: "ğŸ“" },
            { fr: "les raisins", zh: "è‘¡è„", emoji: "ğŸ‡" },
            { fr: "la tomate", zh: "ç•ªèŒ„", emoji: "ğŸ…" },
            { fr: "la pomme de terre", zh: "é¦¬éˆ´è–¯", emoji: "ğŸ¥”" },
            { fr: "la carotte", zh: "ç´…è˜¿è””", emoji: "ğŸ¥•" },
            { fr: "l'oignon", zh: "æ´‹è”¥", emoji: "ğŸ§…" },
            { fr: "l'ail", zh: "å¤§è’œ", emoji: "ğŸ§„" },
            { fr: "la salade", zh: "ç”Ÿèœ/æ²™æ‹‰", emoji: "ğŸ¥—" },
            { fr: "le champignon", zh: "è˜‘è‡", emoji: "ğŸ„" },
            { fr: "le fromage", zh: "èµ·å¸", emoji: "ğŸ§€" },
            { fr: "le lait", zh: "ç‰›å¥¶", emoji: "ğŸ¥›" },
            { fr: "le yaourt", zh: "å„ªæ ¼", emoji: "ğŸ¥£" },
            { fr: "le gÃ¢teau", zh: "è›‹ç³•", emoji: "ğŸ°" },
            { fr: "le chocolat", zh: "å·§å…‹åŠ›", emoji: "ğŸ«" },
            { fr: "la glace", zh: "å†°æ·‡æ·‹", emoji: "ğŸ¨" },
            { fr: "le sucre", zh: "ç³–", emoji: "ğŸ¬" },
            { fr: "le miel", zh: "èœ‚èœœ", emoji: "ğŸ¯" },
            { fr: "le macaron", zh: "é¦¬å¡é¾", emoji: "ğŸ˜" },
            { fr: "la tarte", zh: "å¡”/æ´¾", emoji: "ğŸ¥§" },
            { fr: "l'eau", zh: "æ°´", emoji: "ğŸ’§" },
            { fr: "le cafÃ©", zh: "å’–å•¡", emoji: "â˜•" },
            { fr: "le thÃ©", zh: "èŒ¶", emoji: "ğŸµ" },
            { fr: "le jus", zh: "æœæ±", emoji: "ğŸ§ƒ" },
            { fr: "le vin", zh: "è‘¡è„é…’", emoji: "ğŸ·" },
            { fr: "la biÃ¨re", zh: "å•¤é…’", emoji: "ğŸº" },
            { fr: "le champagne", zh: "é¦™æª³", emoji: "ğŸ¥‚" },
            { fr: "le coca", zh: "å¯æ¨‚", emoji: "ğŸ¥¤" },
            { fr: "le chocolat chaud", zh: "ç†±å·§å…‹åŠ›", emoji: "â˜•" }
        ];

        // Conjugation Logic
        const verbs = {
            // Style 1: Je voudrais (Vouloir - Conditionnel)
            'voudrais': {
                base: "vouloir",
                forms: {
                    'Je': 'voudrais', 'Tu': 'voudrais', 'Il': 'voudrait', 'Elle': 'voudrait', 'On': 'voudrait',
                    'Nous': 'voudrions', 'Vous': 'voudriez', 'Ils': 'voudraient', 'Elles': 'voudraient'
                },
                zhPattern: "{subject} æƒ³è¦ {food}",
                hint: "ğŸ’¡ é€™æ˜¯æœ€ä¿éšªã€æœ€æœ‰ç¦®è²Œçš„é»é¤æ–¹å¼ï¼Œé©ç”¨æ–¼ä»»ä½•å ´åˆã€‚"
            },
            // Style 2: Je vais prendre (Aller + Prendre - Futur Proche)
            'vais_prendre': {
                base: "aller prendre",
                forms: {
                    'Je': 'vais prendre', 'Tu': 'vas prendre', 'Il': 'va prendre', 'Elle': 'va prendre', 'On': 'va prendre',
                    'Nous': 'allons prendre', 'Vous': 'allez prendre', 'Ils': 'vont prendre', 'Elles': 'vont prendre'
                },
                zhPattern: "{subject} å°‡è¦é»/æ‹¿ {food}",
                hint: "ğŸ’¡ è¡¨ç¤ºä½ å·²ç¶“æ±ºå®šå¥½è¦é»ä»€éº¼äº†ï¼Œèªæ°£å¾ˆæ¨™æº–ã€‚"
            },
            // Style 3: Je prends (Prendre - PrÃ©sent)
            'prends': {
                base: "prendre",
                forms: {
                    'Je': 'prends', 'Tu': 'prends', 'Il': 'prend', 'Elle': 'prend', 'On': 'prend',
                    'Nous': 'prenons', 'Vous': 'prenez', 'Ils': 'prennent', 'Elles': 'prennent'
                },
                zhPattern: "{subject} æ‹¿/é» {food}",
                hint: "ğŸ’¡ ç°¡å–®ç›´æ¥ï¼Œåœ¨è¼•é¬†çš„é¤å»³æˆ–éºµåŒ…åº—å¾ˆå¸¸ç”¨ã€‚"
            },
            // Style 4: Ce sera (ÃŠtre - Futur simple) - FIXED SUBJECT
            'ce_sera': {
                base: "ce sera",
                isFixed: true, // Special flag
                fixedSubject: "Ce",
                fixedVerb: "sera",
                forms: {
                    'Je': 'sera', 'Tu': 'sera', 'Il': 'sera', 'Nous': 'sera', 'Vous': 'sera', 'Ils': 'sera' // Dummy
                },
                zhPattern: "é€™å°‡æœƒæ˜¯ {food} (æˆ‘é» {food})",
                hint: "âš ï¸ æ³¨æ„ï¼šé€™æ˜¯ä¸€å€‹å›ºå®šç”¨æ³•ï¼Œä¸»è©æ°¸é æ˜¯ 'Ce' (é€™)ï¼Œè¡¨ç¤ºã€Œæˆ‘çš„é¤é»å°‡æœƒæ˜¯...ã€ã€‚"
            }
        };

        const subjectZhMap = {
            'Je': 'æˆ‘', 'Tu': 'ä½ ', 'Il': 'ä»–', 'Elle': 'å¥¹', 
            'On': 'æˆ‘å€‘', 'Nous': 'æˆ‘å€‘', 'Vous': 'æ‚¨/ä½ å€‘', 
            'Ils': 'ä»–å€‘', 'Elles': 'å¥¹å€‘', 'Ce': ''
        };

        // DOM Elements
        const subjectSelect = document.getElementById('subjectSelect');
        const structureSelect = document.getElementById('structureSelect');
        const foodSelect = document.getElementById('foodSelect');
        const sentenceDisplay = document.getElementById('sentenceDisplay');
        const translationDisplay = document.getElementById('translationDisplay');
        const structureHint = document.getElementById('structureHint');
        const conjugationRow = document.getElementById('conjugationRow');
        const conjugationTable = document.getElementById('conjugationTable');

        function init() {
            // Populate Food List
            foodSelect.innerHTML = '';
            foodList.forEach(item => {
                const option = document.createElement('option');
                option.value = item.fr; // e.g. "la baguette"
                option.text = `${item.emoji} ${item.fr} (${item.zh})`;
                option.dataset.zh = item.zh;
                foodSelect.appendChild(option);
            });
            
            handleStructureChange();
        }

        function handleStructureChange() {
            const styleKey = structureSelect.value;
            const styleData = verbs[styleKey];
            
            // Update Hint
            structureHint.innerText = styleData.hint;

            // Handle Fixed Subject Logic (Ce sera)
            if (styleData.isFixed) {
                subjectSelect.disabled = true;
                subjectSelect.classList.add('opacity-50', 'bg-gray-100');
                // Store previous selection if needed, but for now just visually lock
            } else {
                subjectSelect.disabled = false;
                subjectSelect.classList.remove('opacity-50', 'bg-gray-100');
            }

            updateConjugationTable(styleKey);
            updateSentence();
        }

        function updateConjugationTable(styleKey) {
            const styleData = verbs[styleKey];
            conjugationRow.innerHTML = '';

            if (styleData.isFixed) {
                conjugationTable.style.opacity = '0.3'; // Dim table for fixed phrases
                return;
            } else {
                conjugationTable.style.opacity = '1';
            }

            const forms = styleData.forms;
            const order = ['Je', 'Tu', 'Il', 'Nous', 'Vous', 'Ils'];
            
            let html = '<tr class="bg-white border-b hover:bg-yellow-50 transition">';
            order.forEach(sub => {
                html += `<td class="px-2 py-3 text-blue-600 font-medium">${forms[sub]}</td>`;
            });
            html += '</tr>';
            conjugationRow.innerHTML = html;
        }

        function updateSentence() {
            const styleKey = structureSelect.value;
            const styleData = verbs[styleKey];
            let subject = subjectSelect.value;
            
            // Get Food
            const foodOption = foodSelect.options[foodSelect.selectedIndex];
            const foodFr = foodOption.value;
            const foodZh = foodOption.dataset.zh;

            let finalSentence = "";
            let finalTrans = "";

            if (styleData.isFixed) {
                // Special Case: Ce sera
                finalSentence = `Pour moi, ce sera ${foodFr}, s'il vous plaÃ®t.`;
                finalTrans = `å°æˆ‘ä¾†èªªï¼Œæˆ‘é»${foodZh}ï¼Œéº»ç…©äº†ã€‚`; // More natural translation for "Pour moi, ce sera"
            } else {
                // Normal Conjugation
                let verbForm = styleData.forms[subject];
                
                // Handle Elision (Je + Vowel)
                // "Je" + "ai..." or "Je" + "allons" (wait, Je is Vais)
                // Check if verb starts with vowel?
                // In our current list: "voudrais" (cons), "vais" (cons), "prends" (cons).
                // So no J' needed for these specific 3 verbs. 
                // But let's be safe if we add "aimer" later.
                
                finalSentence = `${subject} ${verbForm} ${foodFr}, s'il vous plaÃ®t.`;
                
                // Construct Translation
                let subZh = subjectZhMap[subject];
                finalTrans = styleData.zhPattern
                    .replace('{subject}', subZh)
                    .replace('{food}', foodZh) + "ï¼Œéº»ç…©äº†ã€‚";
            }

            sentenceDisplay.innerText = finalSentence;
            translationDisplay.innerText = finalTrans;
        }

        function randomizeFood() {
            const count = foodSelect.options.length;
            const randomIdx = Math.floor(Math.random() * count);
            foodSelect.selectedIndex = randomIdx;
            updateSentence();
        }

        function speakSentence() {
            const text = sentenceDisplay.innerText;
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'fr-FR';
            utterance.rate = 0.85; // Slightly slower for clarity
            
            const voices = window.speechSynthesis.getVoices();
            const frVoice = voices.find(voice => voice.lang.includes('fr'));
            if (frVoice) utterance.voice = frVoice;

            window.speechSynthesis.speak(utterance);
        }

        window.onload = init;

    </script>
</body>
</html>